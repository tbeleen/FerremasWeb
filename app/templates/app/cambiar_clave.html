<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Actualizar Contraseña</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light" style="background-image: url('/static/app/img/herramientas.webp'); background-size: cover; background-position: center; background-repeat: no-repeat; background-attachment: fixed;">

  <div class="container py-5">
    <form method="post" class="bg-white p-4 shadow rounded" style="max-width: 400px; margin: auto;">
      {% csrf_token %}
      <h2 class="mb-4 text-center text-danger">Actualizar Contraseña</h2>

      {% if messages %}
        {% for message in messages %}
          <!-- Modal de error/éxito -->
          <div class="modal fade" id="messageModal" tabindex="-1" aria-labelledby="messageModalLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content {% if message.tags == 'error' %}bg-danger{% else %}bg-success{% endif %} text-white">
                <div class="modal-header">
                  <h5 class="modal-title" id="messageModalLabel">{% if message.tags == 'error' %}Error{% else %}Éxito{% endif %}</h5>
                  <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  {{ message }}
                </div>
              </div>
            </div>
          </div>
        {% endfor %}
      {% endif %}

      <div class="mb-3">
        <label for="nueva_clave" class="form-label">Nueva contraseña</label>
        <input type="password" class="form-control" id="nueva_clave" name="nueva_clave" required>
      </div>

      <div class="mb-3">
        <label for="repetir_clave" class="form-label">Repetir contraseña</label>
        <input type="password" class="form-control" id="repetir_clave" name="repetir_clave" required>
      </div>

      <div class="text-center">
        <button type="submit" class="btn btn-primary">Actualizar contraseña</button>
      </div>
      
      <div class="text-center mt-3">
        <a href="{% url 'index' %}" class="btn btn-secondary">Volver al Inicio</a>
      </div>
    </form>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Activar modal si hay mensajes -->
  {% if messages %}
  <script>
    var messageModal = new bootstrap.Modal(document.getElementById('messageModal'));
    messageModal.show();
  </script>
  {% endif %}
</body>
</html>